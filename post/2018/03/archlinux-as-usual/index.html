<!DOCTYPE html>
<html lang="zh-hans">

<head>
    
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<meta name="HandheldFriendly" content="True" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
<meta name="generator" content="Hugo 0.88.1" />


<link rel="apple-touch-icon" sizes="180x180" href="https://www.maoxuner.cn/apple-touch-icon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="https://www.maoxuner.cn/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="https://www.maoxuner.cn/favicon-16x16.png" />
<link rel="manifest" href="https://www.maoxuner.cn/site.webmanifest" />
<link rel="mask-icon" href="https://www.maoxuner.cn/safari-pinned-tab.svg" color="#5bbad5" />
<meta name="msapplication-TileColor" content="#da532c" />
<meta name="theme-color" content="#ffffff" />



<title>日常使用ArchLinux - 二次元の技术宅</title>


<meta name="author" content="maoxuner" />


<meta name="description" content="二次元爱好者的技术博客。专于php、linux" />


<meta name="keywords" content="linux, archlinux" />


<meta property="og:title" content="日常使用ArchLinux" />
<meta name="twitter:title" content="日常使用ArchLinux" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.maoxuner.cn/post/2018/03/archlinux-as-usual/" /><meta property="og:description" content="简单来说，受够了windows，买不起osx，就只能折腾linux。折腾了好几个发行版，这次换了archlinux了。理由很简单：软件版本新、滚动发行、yaourt yay一切。

折腾了一阵子MacOS，发现它的软件管理太麻烦了：

AppStore（系统更新、部分软件包）
网络上的软件包
HomeBrew（GNU、Casks）

大部分Casks不能更换软件源，更新速度极慢，加上Mac机器老旧，新上市的AMD yes等原因，便回到了linux阵营。" />
<meta name="twitter:description" content="简单来说，受够了windows，买不起osx，就只能折腾linux。折腾了好几个发行版，这次换了archlinux了。理由很简单：软件版本新、滚动发行、yaourt yay一切。

折腾了一阵子MacOS，发现它的软件管理太麻烦了：

AppStore（系统更新、部分软件包）
网络上的软件包
HomeBrew（GNU、Casks）

大部分Casks不能更换软件源，更新速度极慢，加上Mac机器老旧，新上市的AMD yes等原因，便回到了linux阵营。" /><meta property="og:image" content="https://www.maoxuner.cn/img/og.png" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://www.maoxuner.cn/img/og.png" /><meta property="article:published_time" content="2018-03-23T14:14:29+08:00" /><meta property="article:modified_time" content="2018-03-23T14:14:29+08:00" />


<style>
    @media (prefers-color-scheme: dark) {
        body[data-theme='auto'] img {
            filter: brightness(60%);
        }
    }

    body[data-theme='dark'] img {
        filter: brightness(60%);
    }
</style>



<link rel="stylesheet" href="https://www.maoxuner.cn/assets/css/fuji.min.css" />





</head>

<body data-theme="auto">
    <script data-cfasync="false">
  
  var fujiThemeData = localStorage.getItem('fuji_data-theme');
  
  if (!fujiThemeData) {
    localStorage.setItem('fuji_data-theme', 'auto');
  } else {
    
    if (fujiThemeData !== 'auto') {
      document.body.setAttribute('data-theme', fujiThemeData === 'dark' ? 'dark' : 'light');
    }
  }
</script>
    <header>
    <div class="container-lg clearfix">
        <div class="col-12 header">
            <a class="title-main" href="https://www.maoxuner.cn/">二次元の技术宅</a>
            
            <span class="title-sub">念念不忘，必有回响。</span>
            
        </div>
    </div>
</header>

    <main>
        <div class="container-lg clearfix">
            
            <div class="col-12 col-md-9 float-left content">
                
<article>
    
    <h2 class="post-item post-title">
        <a href="https://www.maoxuner.cn/post/2018/03/archlinux-as-usual/">日常使用ArchLinux</a>
    </h2>
    <div class="post-item post-meta">
        <span><i class="iconfont icon-today-sharp"></i>&nbsp;2018-03-23</span>

<span><i class="iconfont icon-file-tray-sharp"></i>&nbsp;2932 字</span>

<span><i class="iconfont icon-pricetags-sharp"></i>&nbsp;<a href="/tags/linux">linux</a>&nbsp;<a href="/tags/archlinux">archlinux</a>&nbsp;</span>

    </div>
    
    <div class="post-content markdown-body">
        <p>简单来说，受够了windows，买不起osx，就只能折腾linux。折腾了好几个发行版，这次换了archlinux了。理由很简单：软件版本新、滚动发行、<del>yaourt</del> yay一切。</p>
<hr>
<p>折腾了一阵子MacOS，发现它的软件管理太麻烦了：</p>
<ul>
<li>AppStore（系统更新、部分软件包）</li>
<li>网络上的软件包</li>
<li>HomeBrew（GNU、Casks）</li>
</ul>
<p>大部分Casks不能更换软件源，更新速度极慢，加上Mac机器老旧，新上市的AMD yes等原因，便回到了linux阵营。</p>
<h1 id="系统安装">系统安装</h1>
<h2 id="硬件信息">硬件信息</h2>
<p><del><a href="http://detail.zol.com.cn/notebook/index1154272.shtml" target="_blank">戴尔Inspiron 灵越 燃7000（Ins 14-7460-D1525S）</a></del></p>
<p><a href="https://wiki.archlinux.org/index.php/Lenovo_IdeaPad_S540_13ARE" target="_blank">联想小新Pro2020锐龙版（Lenovo Ideapad S540-13ARE）</a></p>
<h2 id="安装流程">安装流程</h2>
<h3 id="启动安装镜像">启动安装镜像</h3>
<p><strong>关闭 Security Boot</strong>，跟Windows激活有关，但不影响激活使用。</p>
<p><a href="https://mirrors.aliyun.com/archlinux/iso/latest/" target="_blank">https://mirrors.aliyun.com/archlinux/iso/latest/</a></p>
<pre><code>https://mirrors.aliyun.com/archlinux/iso/latest/archlinux-2020.06.01-x86_64.iso
</code></pre>
<blockquote>
<p>从<code>archlinux-2020.07.01-x86_64.iso</code>开始，安装环境移除了<code>netctl</code>包，不再有<code>wifi-menu</code>命令，应使用<code>iwctl</code>来管理无线网连接。</p>
</blockquote>
<ol>
<li>使用grub直接引导iso镜像，其中<code>archisolabel</code>建议设置成iso的实际label。（manjaro的参数名称是<code>misolabel</code>）
<pre><code>menuentry 'install arch' {
    loopback loop (hd0,1)/.boot/linux/archlinux-2020.06.01-x86_64.iso
    set root=(loop)
    linux /arch/boot/x86_64/vmlinuz archisolabel=ARCH_202006
    initrd /arch/boot/x86_64/archiso.img
}
</code></pre>
</li>
<li>启动过程中会遇到问题，停在rootfs界面。
<pre><code>Waiting 30 second for device /dev/disk/by_label/ARCH_201803 Error
</code></pre>
<p>手动挂载iso文件所在的分区，假设挂载到<code>/usb</code>，并加载对应的iso文件，然后退出rootfs</p>
<pre><code class="language-bash">losetup /dev/loop0 /usb/archlinux-2018.03.01-x86_64.iso
</code></pre>
</li>
</ol>
<h3 id="基础安装">基础安装</h3>
<p>分区以及挂载磁盘到<code>/mnt</code></p>
<pre><code class="language-bash"># 有线网会自动连接，无线网需要手动连接
# wifi连接，可能要执行 rfkill 命令，解禁无线设备（或者使用键盘快捷键解锁无线设备）
#iwctl --passphrase your_wifi_password station wlan0 connect your_wifi_name
# 分配ip
#dhcpcd

# 同步时间
timedatectl set-ntp true

# 镜像源
cat &lt;&lt;EOF&gt;/etc/pacman.d/mirrorlist
Server = http://mirrors.aliyun.com/archlinux/\$repo/os/\$arch
EOF

# 分区，并挂载到`/mnt`（注意是否是efi启动），EFI分区挂载到`/boot/efi`

# base-devel包含yay所需组件
pacstrap /mnt base base-devel linux linux-firmware

# 生成分区挂载信息，如果有swapfile，注意修改路径
genfstab -U /mnt &gt;&gt; /mnt/etc/fstab

# chroot
arch-chroot /mnt

# ****** 以下为chroot环境 ******

# 时区
ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
# 好像能避免windows、linux相差8小时的问题
hwclock --systohc

# 语言
cat &lt;&lt;EOF&gt;&gt; /etc/locale.gen
en_US.UTF-8
zh_CN.UTF-8
EOF
locale-gen
cat &lt;&lt;EOF&gt;/etc/locale.conf
LANG=en_US.UTF-8
LANGUAGE=en_US
EOF

# 主机名
echo ideabook &gt; /etc/hostname
cat &lt;&lt;EOF&gt;&gt; /etc/hosts
127.0.0.1 localhost
::1       localhost
127.0.0.1 ideabook
::1       ideabook
EOF

# LVM支持
pacman -S lvm2
# 添加lvm2钩子，HOOKS=(... block lvm2 filesystems ...)重建内核
vim /etc/mkinitcpio.conf
mkinitcpio -P

# NTFS分区支持
pacman -S ntfs-3g

# intel cpu
#pacman -S intel-ucode
# amd cpu
pacman -S amd-ucode
# 安装引导
pacman -S grub efibootmgr
# windows双系统检测
pacman -S os-prober
# 默认 --target=x86_64
grub-install
grub-mkconfig -o /boot/grub/grub.cfg

# 休眠支持
# /etc/mkinitcpio.conf
# 添加内核钩子resume，紧跟着filesystems HOOKS=(... filesystems resume ...)
# HOOKS=(base udev autodetect modconf block lvm2 filesystems resume keyboard fsck)
# /etc/default/grub
# 添加内核参数（swap分区位置信息） resume=/dev/sda4
# GRUB_CMDLINE_LINUX_DEFAULT=&quot;resume=/dev/vg0/swap loglevel=3 quiet splash&quot;

# 网络连接
# 如：networkmanager（wicd已被弃用）
# 注意启用相应的网络服务只能启动一个
pacman -S openresolv
cat &lt;&lt;EOF&gt;&gt;/etc/resolvconf.conf
#name_servers=172.17.0.1
#name_servers_append=223.5.5.5
EOF

# NetworkManager
pacman -S networkmanager
cat &lt;&lt;EOF&gt;/etc/NetworkManager/conf.d/rc-manager.conf
[main]
rc-manager=resolvconf
EOF

# iwd使用
mkdir /etc/iwd
cat &lt;&lt;EOF&gt;/etc/iwd/main.conf
[General]
EnableNetworkConfiguration=true
[Network]
NameResolvingService=resolvconf
EOF

# 支持32位、aur源
pacman -S archlinuxcn-keyring
cat &lt;&lt;EOF&gt;&gt; /etc/pacman.conf
[multilib]
Include = /etc/pacman.d/mirrorlist

[archlinuxcn]
Server = http://mirrors.aliyun.com/$repo/$arch
EOF
pacman -Syy
pacman -S yay
</code></pre>
<p>退出并重启</p>
<pre><code class="language-bash">exit
umount -R /mnt
reboot
</code></pre>
<h3 id="图形界面">图形界面</h3>
<h4 id="结构">结构</h4>
<p><code>Linux系统 &lt;=&gt; 显卡驱动 &lt;=&gt; 图形服务 &lt;=&gt; 桌面管理器 &lt;=&gt; 桌面环境</code>姑且这么理解吧，之前总搞不懂装个图形界面怎么这么多东西。</p>
<h4 id="显卡驱动">显卡驱动</h4>
<pre><code class="language-bash">pacman -S mesa lib32-mesa
</code></pre>
<ol>
<li>
<p>intel</p>
<pre><code class="language-bash">pacman -S xf86-video-intel
</code></pre>
</li>
<li>
<p>amdgpu</p>
<pre><code class="language-bash">pacman -S xf86-video-amdgpu
</code></pre>
<p>4800U是5代GCN，非Southern Islands或Sea Islands启用内核模块<br>
<code>/etc/mkinitcpio.conf</code></p>
<pre><code>MODULES=(amdgpu)
</code></pre>
<p>重建内核</p>
<pre><code class="language-bash">mkinitcpio -P
</code></pre>
</li>
<li>
<p>nvidia</p>
<pre><code class="language-bash"># nouveau驱动比较菜鸡，可以考虑安装nvidia包
#pacman -S xf86-video-nouveau
pacman -S nvidia lib32-nvidia-utils
pacman -S bumblebee lib32-virtualgl
systemctl enable bumblebeed
usermod -a -G bumblebee nono
# 重启
pacman -S primus lib32-primus
</code></pre>
<p><strong>测试</strong></p>
<pre><code class="language-shell">pacman -S mesa-demos
glxgears -info
optirun glxgears -info
# 添加vblank_mode=0，primus才能全力运行
vblank_mode=0 primusrun glxgears -info
vblank_mode=0 optirun -b primus glxgears -info
</code></pre>
<p><em>optirun默认使用virtualgl桥接，效率比primus低</em></p>
<p><em>primus好久没人维护了，有些bug</em></p>
<p>steam中游戏启动参数</p>
<pre><code>vblank_mode=0 primusrun %command%
</code></pre>
<p>国服dota启动参数</p>
<pre><code>vblank_mode=0 primusrun %command% -language schinese -international -perfectworld
</code></pre>
</li>
</ol>
<h4 id="图形服务">图形服务</h4>
<pre><code class="language-bash">pacman -S xorg-server
</code></pre>
<h4 id="桌面环境">桌面环境</h4>
<ol>
<li><del>推荐</del><a href="https://wiki.archlinux.org/index.php/Deepin_Desktop_Environment" target="_blank">Deepin</a>（V20目前Bug比较多），国人开发，界面美观，工具丰富。
<pre><code class="language-bash">pacman -S deepin deepin-extra
</code></pre>
</li>
<li><a href="https://wiki.archlinux.org/index.php/KDE" target="_blank">KDE</a>功能强大，配置项灵活。扩展应用包很大，包含了很多不常用的如教育、游戏的软件包。
<pre><code class="language-bash">pacman -S plasma kde-applications
# 不想安装mariadb时
#pacman -S plasma kde-applications --assume-installed=mariadb
</code></pre>
</li>
<li><a href="https://wiki.archlinux.org/index.php/Xfce" target="_blank">xfce4</a>精简好用
<pre><code class="language-bash">pacman -S xfce4 xfce4-goodies
# 如果是NetworkManager
pacman -S nm-connection-editor network-manager-applet
# 声音
pacman -S pulseaudio pulseaudio-alsa pulseaudio-bluetooth xfce4-pulseaudio-plugin pavucontrol
</code></pre>
</li>
</ol>
<p>通用部分</p>
<pre><code class="language-bash"># 网络组件（原则同上所述）
pacman -S networkmanager
systemctl enable NetworkManager

# 蓝牙播放设备所需组件，bluez默认已经安装
pacman -S bluez pulseaudio-bluetooth
# 蓝牙服务（蓝牙图标）
systemctl enable bluetooth
</code></pre>
<h4 id="桌面管理器">桌面管理器</h4>
<ol>
<li><code>lightdm</code>作为<code>deepin</code>的依赖会自动安装，也可以给xfce4用<br>
启用<code>lightdm</code>桌面管理器
<pre><code class="language-bash">pacman -S lightdm-gtk-greeter-settings
systemctl enable lightdm
</code></pre>
</li>
<li><code>sddm</code>是kde默认的桌面管理器
<pre><code class="language-bash">systemctl enable sddm
</code></pre>
</li>
</ol>
<h3 id="输入法">输入法</h3>
<pre><code class="language-bash">pacman -S wqy-microhei
# 中文字体 cjk（中日韩）
pacman -S noto-fonts-cjk
# yay不能以root运行
yay -S fcitx-sogoupinyin
# 用fcitx-configtool而不用kcm-fcitx（kde），会安装kwallte
# fcitx-gtk fcitx-qt能让输入法支持各个架构写的程序
pacman -S fcitx-configtool fcitx fcitx-qt5
# 设置环境变量，否则输入法切换不出来
cat &lt;&lt;EOF&gt;&gt;~/.xprofile
export GTK_IM_MODULE=fcitx
export QT_IM_MODULE=fcitx
export XMODIFIERS=@im=fcitx

export LANG=zh_CN.UTF-8
export LANGUAGE=zh_CN
EOF
cat &lt;&lt;EOF&gt;&gt;~.pam_environment
GTK_IM_MODULE DEFAULT=fcitx
QT_IM_MODULE  DEFAULT=fcitx
XMODIFIERS    DEFAULT=@im=fcitx
EOF
</code></pre>
<h1 id="应用软件">应用软件</h1>
<pre><code class="language-bash"># 工具
yay -S zsh git subversion mlocate
# 编辑器
yay -S vim sublime-text-imfix code phpstorm
# 网络
yay -S uget chromium firefox-i18n-zh-cn
# 开发
yay -S npm php mariadb-clients redis
yay -S postman-bin dbeaver docker docker-compose
#yay -S virtualbox virtualbox-host-modules-arch virtualbox-ext-oracle virtualbox-guest-iso
# 把当前用户加入virtualbox用户组，否则virtualbox识别不到usb设备
#usermod -a -G vboxusers ${USER}
# 聊天社交
yay -S thunderbird-i18n-zh-cn electronic-wechat qq-linux
# 音乐
yay -S netease-cloud-music
# wps、pdf
yay -S wps-office-cn ttf-wps-fonts foxitreader
# 图片处理
yay -S gimp
# 游戏
yay -S steam
#yay -S steam-native-runtime
#yay -S steamcmd
# 墙
#yay -S shadowsocks kcptun tsocks
yay -S v2ray
# 远程协助
#yay -S teamviewer
# 内网穿透
yay -S frpc frps
# 等宽字体
yay -S ttf-iosevka adobe-source-code-pro-fonts
# android安卓工具，adb/fastboot/driver
yay -S android-tools android-udev mtpfs gvfs-mtp gvfs-gphoto2
# 其他
yay -S sshpass
yay -S man-pages-zh_cn
</code></pre>
<h1 id="开机动画">开机动画</h1>
<p>这里指的是，从grub选中以后，到出现登录界面之间的加载过程中的动画。使用KMS组件<code>plymouth</code>。</p>
<h2 id="安装">安装</h2>
<pre><code>yay -S plymouth
# 以下为可选操作，plymouth-theme-arch-logo是个比较好看的动画（主题）
yay -S plymouth-theme-arch-logo
plymouth-set-default-theme arch-logo
</code></pre>
<h2 id="配置plymouth参数">配置plymouth参数</h2>
<p><code>/etc/plymouth/plymouthd.conf</code></p>
<pre><code># Distribution defaults. Changes to this file will get overwritten during
# upgrades.
[Daemon]
Theme=arch-logo
ShowDelay=0
DeviceTimeout=5
</code></pre>
<h2 id="配置kms">配置KMS</h2>
<p>编辑<code>/etc/mkinitcpio.conf</code>，把<code>plymouth</code>添加到HOOKS的<code>base udev</code>之后，示例如下</p>
<pre><code>HOOKS=(base udev plymouth autodetect modconf block filesystems keyboard fsck)
</code></pre>
<h2 id="重建内核">重建内核</h2>
<p><strong>每次修改plymouth参数都需要重建内核</strong></p>
<pre><code class="language-bash">mkinitcpio -P
</code></pre>
<p>如果设置主题时加上<code>-R</code>参数，会自动执行上述操作</p>
<pre><code>plymouth-set-default-theme -R arch-logo
</code></pre>
<h2 id="修改内核参数">修改内核参数</h2>
<p>如果启动引导器是GRUB，编辑<code>/etc/default/grub</code>，给常量<code>GRUB_CMDLINE_LINUX_DEFAULT</code>添加<code>quiet splash</code></p>
<pre><code>GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet splash&quot;
</code></pre>
<p>然后重新生成grub配置文件</p>
<pre><code class="language-bash">grub-mkconfig -o /boot/grub/grub.cfg
</code></pre>
<h2 id="切换plymouth版本的桌面管理器">切换Plymouth版本的桌面管理器</h2>
<p>能够使开机动画与登录界面平滑过度</p>
<ul>
<li>lightdm
<pre><code class="language-bash">systemctl disable lightdm
systemctl enable lightdm-plymouth
</code></pre>
</li>
<li>sddm
<pre><code class="language-bash">systemctl disable sddm
systemctl enable sddm-plymouth
</code></pre>
</li>
</ul>
<h1 id="常见问题faq">常见问题/FAQ</h1>
<ol>
<li><code>yay</code>执行安装命令后提示<code>找不到数据库错误！</code>
这是翻译的坑，原文是<code>no database errors have been found</code>，意思是<code>没有发现数据库错误</code>，就是没有错误，一切正常。</li>
<li><code>adb shell</code>提示一下错误信息
<pre><code>error: insufficient permissions for device
</code></pre>
<p>archlinux安装<code>android-udev</code>包即可。其他发行版参考<a href="https://developer.android.com/studio/run/device" target="_blank">在硬件设备上运行应用</a></p>
</li>
<li>安装<code>archlinuxcn-keyring</code>秘钥验证失败（出现类似以下错误信息）
<pre><code>==&gt; Locally signing trusted keys in keyring...
  -&gt; Locally signing key 02E02B85AF209AA00F784A1DD48313B447CD9E46...
==&gt; ERROR: 02E02B85AF209AA00F784A1DD48313B447CD9E46 could not be locally signed.
</code></pre>
<p>参考文章<a href="https://www.archlinuxcn.org/gnupg-2-1-and-the-pacman-keyring/" target="_blank">GnuPG-2.1 与 pacman 密钥环</a></p>
</li>
<li>文件管理器连接samba<br>
注意安装<code>gvfs-smb</code></li>
</ol>
<h1 id="参考文章">参考文章</h1>
<ul>
<li><a href="https://wiki.archlinux.org/index.php/Installation_guide" target="_blank">Installation guide</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Bumblebee" target="_blank">Bumblebee</a></li>
<li><a href="https://wiki.archlinux.org/index.php/NVIDIA" target="_blank">NVIDIA</a></li>
<li><a href="https://blog.csdn.net/ispeller/article/details/37765999" target="_blank">Arch Linux 下Intel + NVIDIA 双显卡3D 游戏配置（dota2@steam）</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Plymouth" target="_blank">Plymouth</a></li>
<li><a href="https://blog.csdn.net/xiaxiangnanxp1989/article/details/8605611" target="_blank">error: insufficient permissions for device（解决adb shell问题）</a></li>
<li><a href="https://developer.android.com/studio/run/device" target="_blank">在硬件设备上运行应用</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Media_Transfer_Protocol#FUSE_filesystems" target="_blank">Media Transfer Protocol#FUSE_filesystems</a></li>
<li><a href="https://wiki.archlinux.org/index.php/Lenovo_IdeaPad_S540_13ARE" target="_blank">Lenovo IdeaPad S540-13ARE</a></li>
<li><a href="https://wiki.archlinux.org/index.php/AMDGPU" target="_blank">AMDGPU</a></li>
<li><a href="https://www.notebookcheck.net/AMD-Radeon-RX-Vega-8-Ryzen-4000-GPU-Benchmarks-and-Specs.453150.0.html" target="_blank">AMD Radeon RX Vega 8 (Ryzen 4000)</a></li>
</ul>
    </div>
</article>


<div class="license markdown-body">
    <blockquote>
        <p>除特殊注明部分，本站内容采用 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"
               target="_blank">CC BY-NC-SA 4.0</a> 进行许可。</p>
    </blockquote>
</div>


<div class="post-comment" data-comment="disqus">
    <span class="post-comment-notloaded">
        <i class="iconfont icon-chatbox-ellipses-sharp"></i>&nbsp;查看评论
    </span>
    <div id="disqus_thread" style="display: none;"></div>
    <script>
        function loadComment() {
            var commentArea = document.querySelector('.post-comment');
            var disqus_config = function () {
                this.page.url = 'https:\/\/www.maoxuner.cn\/post\/2018\/03\/archlinux-as-usual\/';
                this.page.identifier = '日常使用ArchLinux';
            };
            var s = document.createElement('script');
            s.src = 'https://' + 'maoxuner' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            document.querySelector('#disqus_thread').removeAttribute('style');
            (document.body || document.head).appendChild(s);
            document.querySelector('span.post-comment-notloaded').setAttribute('style', 'display: none;');
        }
    </script>
</div>


            </div>
            <aside class="col-12 col-md-3 float-left sidebar">
    
    <div class="sidebar-item sidebar-pages">
        <h3>页面</h3>
        <ul>
            
            <li>
                <a href="/archives/">归档</a>
            </li>
            
            <li>
                <a href="/links/">友链</a>
            </li>
            
            <li>
                <a href="/about/">关于</a>
            </li>
            
            <li>
                <a href="/search/">搜索</a>
            </li>
            
            <li>
                <a href="/index.xml">RSS</a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-links">
        <h3>链接</h3>
        <ul>
            
            <li>
                <a href="https://git.fat4.cn/maoxuner" target="_blank"><span>Gitea</span></a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-tags">
        <h3>标签</h3>
        <div>
            
            <span>
                <a href="/tags/acg/">acg</a>
            </span>
            
            <span>
                <a href="/tags/android/">android</a>
            </span>
            
            <span>
                <a href="/tags/apache/">apache</a>
            </span>
            
            <span>
                <a href="/tags/appimage/">appimage</a>
            </span>
            
            <span>
                <a href="/tags/archlinux/">archlinux</a>
            </span>
            
            <span>
                <a href="/tags/bpi/">bpi</a>
            </span>
            
            <span>
                <a href="/tags/c/">c</a>
            </span>
            
            <span>
                <a href="/tags/chat/">chat</a>
            </span>
            
            <span>
                <a href="/tags/chromium/">chromium</a>
            </span>
            
            <span>
                <a href="/tags/cloud/">cloud</a>
            </span>
            
            <span>
                <a href="/tags/codeigniter/">codeigniter</a>
            </span>
            
            <span>
                <a href="/tags/composer/">composer</a>
            </span>
            
            <span>
                <a href="/tags/containerd/">containerd</a>
            </span>
            
            <span>
                <a href="/tags/css/">css</a>
            </span>
            
            <span>
                <a href="/tags/deployer/">deployer</a>
            </span>
            
            <span>
                <a href="/tags/docker/">docker</a>
            </span>
            
            <span>
                <a href="/tags/drone/">drone</a>
            </span>
            
            <span>
                <a href="/tags/flash/">flash</a>
            </span>
            
            <span>
                <a href="/tags/fortran/">fortran</a>
            </span>
            
            <span>
                <a href="/tags/git/">git</a>
            </span>
            
            <span>
                <a href="/tags/go/">go</a>
            </span>
            
            <span>
                <a href="/tags/hexo/">hexo</a>
            </span>
            
            <span>
                <a href="/tags/html/">html</a>
            </span>
            
            <span>
                <a href="/tags/hugo/">hugo</a>
            </span>
            
            <span>
                <a href="/tags/ingress/">ingress</a>
            </span>
            
            <span>
                <a href="/tags/javascript/">javascript</a>
            </span>
            
            <span>
                <a href="/tags/jenkins/">jenkins</a>
            </span>
            
            <span>
                <a href="/tags/jquery/">jquery</a>
            </span>
            
            <span>
                <a href="/tags/k3s/">k3s</a>
            </span>
            
            <span>
                <a href="/tags/k8s/">k8s</a>
            </span>
            
            <span>
                <a href="/tags/kvm/">kvm</a>
            </span>
            
            <span>
                <a href="/tags/laravel/">laravel</a>
            </span>
            
            <span>
                <a href="/tags/linux/">linux</a>
            </span>
            
            <span>
                <a href="/tags/mariadb/">mariadb</a>
            </span>
            
            <span>
                <a href="/tags/movie/">movie</a>
            </span>
            
            <span>
                <a href="/tags/music/">music</a>
            </span>
            
            <span>
                <a href="/tags/mysql/">mysql</a>
            </span>
            
            <span>
                <a href="/tags/nginx/">nginx</a>
            </span>
            
            <span>
                <a href="/tags/nodejs/">nodejs</a>
            </span>
            
            <span>
                <a href="/tags/php/">php</a>
            </span>
            
            <span>
                <a href="/tags/python/">python</a>
            </span>
            
            <span>
                <a href="/tags/rpi/">rpi</a>
            </span>
            
            <span>
                <a href="/tags/shell/">shell</a>
            </span>
            
            <span>
                <a href="/tags/ssl/">ssl</a>
            </span>
            
            <span>
                <a href="/tags/traefik/">traefik</a>
            </span>
            
            <span>
                <a href="/tags/typecho/">typecho</a>
            </span>
            
            <span>
                <a href="/tags/usb/">usb</a>
            </span>
            
            <span>
                <a href="/tags/vps/">vps</a>
            </span>
            
            <span>
                <a href="/tags/windows/">windows</a>
            </span>
            
            <span>
                <a href="/tags/yii2/">yii2</a>
            </span>
            
        </div>
    </div>
    <div class="sidebar-item sidebar-toc">
        <h3>目录</h3><nav id="TableOfContents">
  <ul>
    <li><a href="#硬件信息">硬件信息</a></li>
    <li><a href="#安装流程">安装流程</a>
      <ul>
        <li><a href="#启动安装镜像">启动安装镜像</a></li>
        <li><a href="#基础安装">基础安装</a></li>
        <li><a href="#图形界面">图形界面</a></li>
        <li><a href="#输入法">输入法</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#安装">安装</a></li>
    <li><a href="#配置plymouth参数">配置plymouth参数</a></li>
    <li><a href="#配置kms">配置KMS</a></li>
    <li><a href="#重建内核">重建内核</a></li>
    <li><a href="#修改内核参数">修改内核参数</a></li>
    <li><a href="#切换plymouth版本的桌面管理器">切换Plymouth版本的桌面管理器</a></li>
  </ul>
</nav></div>
</aside>
        </div>
        <div class="btn">
    <div class="btn-menu" id="btn-menu">
        <i class="iconfont icon-grid-sharp"></i>
    </div>
    <div class="btn-toggle-mode">
        <i class="iconfont icon-contrast-sharp"></i>
    </div>
    <div class="btn-scroll-top">
        <i class="iconfont icon-chevron-up-circle-sharp"></i>
    </div>
</div>
<aside class="sidebar-mobile" style="display: none;">
  <div class="sidebar-wrapper">
    
    <div class="sidebar-item sidebar-pages">
        <h3>页面</h3>
        <ul>
            
            <li>
                <a href="/archives/">归档</a>
            </li>
            
            <li>
                <a href="/links/">友链</a>
            </li>
            
            <li>
                <a href="/about/">关于</a>
            </li>
            
            <li>
                <a href="/search/">搜索</a>
            </li>
            
            <li>
                <a href="/index.xml">RSS</a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-links">
        <h3>链接</h3>
        <ul>
            
            <li>
                <a href="https://git.fat4.cn/maoxuner" target="_blank"><span>Gitea</span></a>
            </li>
            
        </ul>
    </div>
    
    <div class="sidebar-item sidebar-tags">
        <h3>标签</h3>
        <div>
            
            <span>
                <a href="/tags/acg/">acg</a>
            </span>
            
            <span>
                <a href="/tags/android/">android</a>
            </span>
            
            <span>
                <a href="/tags/apache/">apache</a>
            </span>
            
            <span>
                <a href="/tags/appimage/">appimage</a>
            </span>
            
            <span>
                <a href="/tags/archlinux/">archlinux</a>
            </span>
            
            <span>
                <a href="/tags/bpi/">bpi</a>
            </span>
            
            <span>
                <a href="/tags/c/">c</a>
            </span>
            
            <span>
                <a href="/tags/chat/">chat</a>
            </span>
            
            <span>
                <a href="/tags/chromium/">chromium</a>
            </span>
            
            <span>
                <a href="/tags/cloud/">cloud</a>
            </span>
            
            <span>
                <a href="/tags/codeigniter/">codeigniter</a>
            </span>
            
            <span>
                <a href="/tags/composer/">composer</a>
            </span>
            
            <span>
                <a href="/tags/containerd/">containerd</a>
            </span>
            
            <span>
                <a href="/tags/css/">css</a>
            </span>
            
            <span>
                <a href="/tags/deployer/">deployer</a>
            </span>
            
            <span>
                <a href="/tags/docker/">docker</a>
            </span>
            
            <span>
                <a href="/tags/drone/">drone</a>
            </span>
            
            <span>
                <a href="/tags/flash/">flash</a>
            </span>
            
            <span>
                <a href="/tags/fortran/">fortran</a>
            </span>
            
            <span>
                <a href="/tags/git/">git</a>
            </span>
            
            <span>
                <a href="/tags/go/">go</a>
            </span>
            
            <span>
                <a href="/tags/hexo/">hexo</a>
            </span>
            
            <span>
                <a href="/tags/html/">html</a>
            </span>
            
            <span>
                <a href="/tags/hugo/">hugo</a>
            </span>
            
            <span>
                <a href="/tags/ingress/">ingress</a>
            </span>
            
            <span>
                <a href="/tags/javascript/">javascript</a>
            </span>
            
            <span>
                <a href="/tags/jenkins/">jenkins</a>
            </span>
            
            <span>
                <a href="/tags/jquery/">jquery</a>
            </span>
            
            <span>
                <a href="/tags/k3s/">k3s</a>
            </span>
            
            <span>
                <a href="/tags/k8s/">k8s</a>
            </span>
            
            <span>
                <a href="/tags/kvm/">kvm</a>
            </span>
            
            <span>
                <a href="/tags/laravel/">laravel</a>
            </span>
            
            <span>
                <a href="/tags/linux/">linux</a>
            </span>
            
            <span>
                <a href="/tags/mariadb/">mariadb</a>
            </span>
            
            <span>
                <a href="/tags/movie/">movie</a>
            </span>
            
            <span>
                <a href="/tags/music/">music</a>
            </span>
            
            <span>
                <a href="/tags/mysql/">mysql</a>
            </span>
            
            <span>
                <a href="/tags/nginx/">nginx</a>
            </span>
            
            <span>
                <a href="/tags/nodejs/">nodejs</a>
            </span>
            
            <span>
                <a href="/tags/php/">php</a>
            </span>
            
            <span>
                <a href="/tags/python/">python</a>
            </span>
            
            <span>
                <a href="/tags/rpi/">rpi</a>
            </span>
            
            <span>
                <a href="/tags/shell/">shell</a>
            </span>
            
            <span>
                <a href="/tags/ssl/">ssl</a>
            </span>
            
            <span>
                <a href="/tags/traefik/">traefik</a>
            </span>
            
            <span>
                <a href="/tags/typecho/">typecho</a>
            </span>
            
            <span>
                <a href="/tags/usb/">usb</a>
            </span>
            
            <span>
                <a href="/tags/vps/">vps</a>
            </span>
            
            <span>
                <a href="/tags/windows/">windows</a>
            </span>
            
            <span>
                <a href="/tags/yii2/">yii2</a>
            </span>
            
        </div>
    </div>
    
    
    
    <div class="sidebar-item sidebar-toc">
        <h3>目录</h3>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#硬件信息">硬件信息</a></li>
    <li><a href="#安装流程">安装流程</a>
      <ul>
        <li><a href="#启动安装镜像">启动安装镜像</a></li>
        <li><a href="#基础安装">基础安装</a></li>
        <li><a href="#图形界面">图形界面</a></li>
        <li><a href="#输入法">输入法</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#安装">安装</a></li>
    <li><a href="#配置plymouth参数">配置plymouth参数</a></li>
    <li><a href="#配置kms">配置KMS</a></li>
    <li><a href="#重建内核">重建内核</a></li>
    <li><a href="#修改内核参数">修改内核参数</a></li>
    <li><a href="#切换plymouth版本的桌面管理器">切换Plymouth版本的桌面管理器</a></li>
  </ul>
</nav>
    </div>
    
    
  </div>
</aside>
    </main>

    <footer>
    <div class="container-lg clearfix">
        <div class="col-12 footer">
            
            <span>&copy; 2014-2021
                <a href="https://www.maoxuner.cn/">maoxuner</a>
                 | <a href="https://git.fat4.cn/maoxuner/blog">Source code</a> 
                | 基于 <a href="https://github.com/dsrkafuu/hugo-theme-fuji/"
                   target="_blank">Fuji-v2</a> &amp; <a href="https://gohugo.io/"
                                                    target="_blank">Hugo</a> 构建
            </span>
        </div>
    </div>
</footer>

    
<script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.0/lazysizes.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/components/prism-core.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/plugins/autoloader/prism-autoloader.min.js"></script>



<script defer src="/assets/js/fuji.min.js"></script>


</body>

</html>